# 数据存储

## 各列独立存储

MergeTree存储引擎中，数据按列存储。每个列字段都拥有一个与之对应的`.bin`数据文件。数据文件以分区目录的形式被组织存放，所以在 `.bin` 文件中只会保存当前分区片段内的这一部分数据。按列独立存储有以下优势：

* 可以更好地进行数据压缩(相同类型的数据放在一起，怼压缩更加友好)。
* 能够最小化数据扫描的范围。

MergeTree 并不是一次性地将数据直接写入`.bin`文件，而是经过了精心设计： 
* 数据是经过压缩的，目前支持LZ4、ZSTD、Multiple和Delta几种算法，默认使用LZ4算法
* 数据会实现按照`ORDER BY`的声明排序
* 数据是以压缩数据块的形式被组织并写入`.bin`文件中的。

&nbsp;

## 压缩数据块

一个压缩数据块由头部和压缩数据两部分组成。头信息固定使用9位字节表示，具体由1个UInt8(1字节)整形和2个UInt32(4字节)整形组成，分别代表使用的压缩算法类型、压缩后的数据大小和压缩前的数据大小。

